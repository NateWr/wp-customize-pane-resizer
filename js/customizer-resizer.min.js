window.wp=window.wp||{},window.wp.customize=window.wp.customize||{},function(a,b,c,d,e){"use strict";var f={size:0},g=0,h=!1,i=null,j=null;d.customize.resizer=f,f.cache=function(){f.cache.cached=!0,f.$={window:a,body:b.body,customizer:b.getElementById("customize-controls"),overlay:".wp-full-overlay.expanded",collapser:".collapse-sidebar-label"},c.each(f.$,function(a,b){f.$[a]=c(b),f.$[a].length<1&&(f.cache.cached=!1)})},f.asap=function(){f.cache(),f.cache.cached&&(f.$.customizer.append('<div class="customizer-resizer"></div>'),j=f.$.customizer.outerWidth(),f.$.resizer=c(".customizer-resizer"),f.checkWindowWidth(),f.$.customizer.addClass("no-animation"),f.snapToStored(),f.$.customizer.removeClass("no-animation"),f.asap.done=!0)},f.init=function(){f.cache.cached||f.asap(),f.initIframeMouseEvents(),f.$.resizer.on("mousedown",f.resizerEngage),c("[aria-expanded]").on("click",f.toggleExpansion),c(a).resize(_.debounce(f.checkWindowWidth,50))},f.toggleExpansion=function(){var a="true"===c(this).attr("aria-expanded");a?f.snapToStored():f.snapToDefault(!0)},f.checkWindowWidth=function(){var a=f.$.window.width();return 640>a?(h=!1,f.$.body.removeClass("resizable"),f.snapToDefault()):void(h||(f.$.body.addClass("resizable"),h=!0))},f.resizerEngage=function(a){if(1===a.which){var d=f.$.window.width(),e=d-f.$.customizer.width();a.preventDefault(),100>e?(f.sizeCustomizer(d-320),f.fullWidth("no")):(f.$.customizer.addClass("no-animation"),c(b).on("mousemove",f.resizerMovement),c(b).on("mouseup",f.resizerDisengage))}},f.resizerMovement=function(a){var b=g<a.pageX;g=a.pageX;var c=f.$.window.width()-g;return 300>c&&c>100?(f.snapToDefault(),f.resizerDisengage(),f.fullWidth("yes")):(f.fullWidth("no"),g>=j+20||g>=j&&b?f.sizeCustomizer(g):!b&&g>j-30&&j+20>g?f.snapToDefault():void(j-30>g&&(f.snapToDefault(),f.resizerDisengage(),f.$.collapser.trigger("click"))))},f.resizerDisengage=function(){c(b).off("mousemove",f.resizerMovement),c(b).off("mouseup",f.resizerDisengage),f.$.customizer.removeClass("no-animation")},f.fullWidth=function(a){var b="yes"===a?"addClass":"removeClass";f.$.body[b]("fullwidth-customizer")},f.snapToStored=function(){f.getStorage()&&f.sizeCustomizer(f.size,!0)},f.snapToDefault=function(a){f.sizeCustomizer("",a)},f.sizeCustomizer=function(a,b){b=b||!1,f.size=a?parseInt(a,10):"",f.$.overlay.css({"margin-left":f.size}),f.$.customizer.width(f.size),b||f.setStorage()},f.initIframeMouseEvents=function(){setTimeout(function(){var a=f.$.overlay.find("iframe");a.length?(f.bubbleMouseEvent(a[0],"mousemove"),f.bubbleMouseEvent(a[0],"mouseup")):f.initIframeMouseEvents()},100)},f.bubbleMouseEvent=function(c,d){var e="on"+d,f=c.contentWindow[e];c.contentWindow[e]=function(e){f&&f(e);var g=b.createEvent("MouseEvents"),h=c.getBoundingClientRect();g.initMouseEvent(d,!0,!1,a,e.detail,e.screenX,e.screenY,e.clientX+h.left,e.clientY+h.top,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,null),c.dispatchEvent(g)}},f.checkStorage=function(){if(null!==i)return i;var b=Math.random().toString();i=!1;try{a.sessionStorage.setItem("wp-test",b),i=a.sessionStorage.getItem("wp-test")===b,a.sessionStorage.removeItem("wp-test")}catch(c){}return i},f.getStorage=function(){return f.checkStorage()&&(f.size=sessionStorage.getItem("wp-customizer-width")),f.size},f.setStorage=function(){return f.checkStorage()&&f.size&&"NaN"!==f.size?(sessionStorage.setItem("wp-customizer-width",f.size),null!==sessionStorage.getItem("wp-customizer-width")):!1},f.asap(),d.customize.bind("ready",f.init)}(window,document,jQuery,window.wp);